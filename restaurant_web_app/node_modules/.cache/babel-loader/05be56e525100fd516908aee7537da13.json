{"ast":null,"code":"import _regeneratorRuntime from \"/mnt/c/Users/jbuxofplenty/Github/fudlocker/restaurant_web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/mnt/c/Users/jbuxofplenty/Github/fudlocker/restaurant_web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/mnt/c/Users/jbuxofplenty/Github/fudlocker/restaurant_web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/jbuxofplenty/Github/fudlocker/restaurant_web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/jbuxofplenty/Github/fudlocker/restaurant_web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/jbuxofplenty/Github/fudlocker/restaurant_web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/jbuxofplenty/Github/fudlocker/restaurant_web_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/mnt/c/Users/jbuxofplenty/Github/fudlocker/restaurant_web_app/src/views/Locations/Locations.js\";\nimport React, { Component } from 'react';\nimport RGL, { WidthProvider } from \"react-grid-layout\";\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Typography from '@material-ui/core/Typography';\nvar ReactGridLayout = WidthProvider(RGL);\n\nvar _ = require('lodash');\n\nvar Locations =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Locations, _Component);\n\n  function Locations(props) {\n    var _this;\n\n    _classCallCheck(this, Locations);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Locations).call(this, props));\n    _this.state = {\n      layout: null,\n      locationsData: null,\n      org: null,\n      mealsForSale: null,\n      uid: null\n    };\n    return _this;\n  }\n\n  _createClass(Locations, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var layout, locationsData;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                layout = this.generateLayout();\n                this.setState({\n                  layout: layout\n                });\n                locationsData = this.processData();\n                this.setState({\n                  locationsData: locationsData\n                });\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"processData\",\n    value: function processData() {\n      var locations = {};\n      var mealsForSale = {};\n\n      for (var i in this.props.meals) {\n        if (this.props.mealsForSale[this.props.meals[i].idMeal]) {\n          mealsForSale[this.props.meals[i].idMeal] = this.props.meals[i];\n        }\n      } // First value is location data, second is how many meals in locker, third is purchased meals from locker, fourth is completed transactions\n\n\n      for (i in this.props.locationsData) {\n        locations[this.props.locationsData[i].type] = [this.props.locationsData[i], 0, 0];\n      }\n\n      for (i in mealsForSale) {\n        locations[mealsForSale[i].location.toLowerCase()][1] += 1;\n      }\n\n      for (i in this.props.purchased) {\n        locations[this.props.purchased[i].location.toLowerCase()][2] += 1;\n      }\n\n      return locations;\n    }\n  }, {\n    key: \"generateDOM\",\n    value: function generateDOM() {\n      var temp = Object.values(this.state.locationsData);\n      return _.map(_.range(temp.length), function (i) {\n        return React.createElement(\"div\", {\n          key: i.toString(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, React.createElement(Card, {\n          style: {\n            maxWidth: 345\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, React.createElement(CardActionArea, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, React.createElement(CardMedia, {\n          component: \"img\",\n          alt: \"\",\n          style: {\n            objectFit: 'cover',\n            aspectRatio: 1\n          },\n          height: \"300\",\n          image: temp[i][0].image,\n          title: temp[i][0].title,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }), React.createElement(CardContent, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          component: \"p\",\n          variant: \"caption\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, temp[i][0].title)), React.createElement(\"div\", {\n          className: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          component: \"p\",\n          variant: \"caption\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, \"Current Meals in Locker: \", temp[i][1], \"/\", temp[i][0].capacity)), React.createElement(\"div\", {\n          className: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          component: \"p\",\n          variant: \"caption\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, \"Meals Sold Today: \", temp[i][2]))))));\n      });\n    }\n  }, {\n    key: \"generateLayout\",\n    value: function generateLayout() {\n      var temp = Object.values(this.props.locationsData);\n      return _.map(new Array(temp.length), function (item, i) {\n        var y = 11;\n        return {\n          x: i * 6 % 12,\n          y: Math.floor(i / 11) * y,\n          w: 6,\n          h: y,\n          i: i.toString(),\n          static: true\n        };\n      });\n    }\n  }, {\n    key: \"onLayoutChange\",\n    value: function onLayoutChange(layout) {\n      this.props.onLayoutChange(layout);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.locationsData && this.state.layout) {\n        return React.createElement(ReactGridLayout, Object.assign({\n          layout: this.state.layout,\n          onLayoutChange: this.onLayoutChange\n        }, this.props, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }), this.generateDOM());\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Loading...\");\n    }\n  }]);\n\n  return Locations;\n}(Component);\n\nexport { Locations as default };\nLocations.defaultProps = {\n  className: \"layout\",\n  items: 20,\n  rowHeight: 30,\n  onLayoutChange: function onLayoutChange() {},\n  cols: 12\n};","map":{"version":3,"sources":["/mnt/c/Users/jbuxofplenty/Github/fudlocker/restaurant_web_app/src/views/Locations/Locations.js"],"names":["React","Component","RGL","WidthProvider","Card","CardActionArea","CardContent","CardMedia","Typography","ReactGridLayout","_","require","Locations","props","state","layout","locationsData","org","mealsForSale","uid","generateLayout","setState","processData","locations","i","meals","idMeal","type","location","toLowerCase","purchased","temp","Object","values","map","range","length","toString","maxWidth","objectFit","aspectRatio","image","title","capacity","Array","item","y","x","Math","floor","w","h","static","onLayoutChange","generateDOM","defaultProps","className","items","rowHeight","cols"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport RGL, { WidthProvider } from \"react-grid-layout\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Typography from '@material-ui/core/Typography';\r\nconst ReactGridLayout = WidthProvider(RGL);\r\nconst _ = require('lodash');\r\n\r\n\r\nexport default class Locations extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      layout: null,\r\n      locationsData: null,\r\n      org: null,\r\n      mealsForSale: null,\r\n      uid: null,\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const layout = this.generateLayout();\r\n    this.setState({ layout });\r\n    var locationsData = this.processData();\r\n    this.setState({ locationsData });\r\n  }\r\n\r\n  processData() {\r\n    var locations = {};\r\n    var mealsForSale = {};\r\n\r\n    for (var i in this.props.meals) {\r\n      if (this.props.mealsForSale[this.props.meals[i].idMeal]) {\r\n        mealsForSale[this.props.meals[i].idMeal] = this.props.meals[i];\r\n      }\r\n    }\r\n\r\n    // First value is location data, second is how many meals in locker, third is purchased meals from locker, fourth is completed transactions\r\n    for (i in this.props.locationsData) {\r\n      locations[this.props.locationsData[i].type] = [this.props.locationsData[i], 0, 0];\r\n    }\r\n\r\n    for (i in mealsForSale) {\r\n      locations[mealsForSale[i].location.toLowerCase()][1] += 1\r\n    }\r\n\r\n    for (i in this.props.purchased) {\r\n      locations[this.props.purchased[i].location.toLowerCase()][2] += 1\r\n    }\r\n\r\n    return locations;\r\n  }\r\n\r\n  generateDOM() {\r\n    var temp = Object.values(this.state.locationsData);\r\n    return _.map(_.range(temp.length), function (i) {\r\n      return (\r\n        <div key={i.toString()}>\r\n          <Card style={{maxWidth: 345}}>\r\n            <CardActionArea>\r\n              <CardMedia\r\n                component=\"img\"\r\n                alt=\"\"\r\n                style={{ objectFit: 'cover', aspectRatio: 1 }}\r\n                height=\"300\"\r\n                image={temp[i][0].image}\r\n                title={temp[i][0].title}\r\n              />\r\n              <CardContent>\r\n                <div className=\"center\">\r\n                  <Typography component=\"p\" variant=\"caption\">\r\n                    {temp[i][0].title}\r\n                  </Typography>\r\n                </div>\r\n                <div className=\"center\">\r\n                  <Typography component=\"p\" variant=\"caption\">\r\n                    Current Meals in Locker: {temp[i][1]}/{temp[i][0].capacity}\r\n                  </Typography>\r\n                </div>\r\n                <div className=\"center\">\r\n                  <Typography component=\"p\" variant=\"caption\">\r\n                    Meals Sold Today: {temp[i][2]}\r\n                  </Typography>\r\n                </div>\r\n              </CardContent>\r\n            </CardActionArea>\r\n          </Card>\r\n        </div>\r\n      );\r\n    });\r\n  }\r\n\r\n  generateLayout() {\r\n    var temp = Object.values(this.props.locationsData);\r\n    return _.map(new Array(temp.length), function (item, i) {\r\n      const y = 11;\r\n      return {\r\n        x: (i * 6) % 12,\r\n        y: Math.floor(i / 11) * y,\r\n        w: 6,\r\n        h: y,\r\n        i: i.toString(),\r\n        static: true\r\n      };\r\n    });\r\n  }\r\n\r\n  onLayoutChange(layout) {\r\n    this.props.onLayoutChange(layout);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.locationsData && this.state.layout) {\r\n      return (\r\n        <ReactGridLayout\r\n          layout={this.state.layout}\r\n          onLayoutChange={this.onLayoutChange}\r\n          {...this.props}\r\n        >\r\n          {this.generateDOM()}\r\n        </ReactGridLayout>\r\n      );\r\n    }\r\n    return <div>Loading...</div>;\r\n  }\r\n}\r\n\r\nLocations.defaultProps = {\r\n  className: \"layout\",\r\n  items: 20,\r\n  rowHeight: 30,\r\n  onLayoutChange: function () { },\r\n  cols: 12\r\n};\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}