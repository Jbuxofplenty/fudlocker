{"ast":null,"code":"import { userConstants, dataConstants } from '../constants';\nimport { alertActions } from './';\nimport fire from \"../firebase\";\nexport var dataActions = {\n  populateDashboard: populateDashboard\n};\n\nfunction populateDashboard() {\n  return function (dispatch) {\n    var locations;\n    fire.database().ref('/lockers/data').once('value', function (snapshot) {\n      var tempArray = {};\n      snapshot.forEach(function (childSnapshot) {\n        var childData = childSnapshot.val();\n        tempArray[childSnapshot.key] = childData;\n      });\n      locations = tempArray;\n      dispatch(locationsSuccess(tempArray));\n    }, function (error) {\n      if (error) {\n        dispatch(locationsFailure(error.toString()));\n        dispatch(alertActions.error(error.toString()));\n      }\n    });\n    console.log(locations);\n    var mealsForSale;\n    fire.database().ref('/meals/forSale').once('value', function (snapshot) {\n      var tempArray = {};\n      snapshot.forEach(function (childSnapshot) {\n        var childData = childSnapshot.val();\n        tempArray[childSnapshot.key] = childData;\n      });\n      mealsForSale = tempArray;\n      dispatch(mealsSuccess(tempArray));\n    }, function (error) {\n      if (error) {\n        dispatch(mealsFailure(error.toString()));\n        dispatch(alertActions.error(error.toString()));\n      }\n    });\n    console.log(mealsForSale);\n    var pickedUp;\n    fire.database().ref('/restaurants/' + org + '/inventory/pickedUp').once('value', function (snapshot) {\n      var tempArray = {};\n      snapshot.forEach(function (childSnapshot) {\n        var childData = childSnapshot.val();\n        tempArray[childSnapshot.key] = childData;\n      });\n      pickedUp = tempArray;\n      dispatch(pickedUpSuccess(tempArray));\n    }, function (error) {\n      if (error) {\n        dispatch(pickedUpFailure(error.toString()));\n        dispatch(alertActions.error(error.toString()));\n      }\n    });\n    console.log(pickedUp);\n  };\n\n  function mealsRequest(data) {\n    return {\n      type: dataConstants.UPDATE_MEALS_REQUEST,\n      data: data\n    };\n  }\n\n  function mealsSuccess(data) {\n    return {\n      type: dataConstants.UPDATE_MEALS_SUCCESS,\n      data: data\n    };\n  }\n\n  function mealsFailure(error) {\n    return {\n      type: dataConstants.UPDATE_MEALS_FAILURE,\n      error: error\n    };\n  }\n\n  function locationsRequest(data) {\n    return {\n      type: dataConstants.UPDATE_LOCATIONS_REQUEST,\n      data: data\n    };\n  }\n\n  function locationsSuccess(data) {\n    return {\n      type: dataConstants.UPDATE_LOCATIONS_SUCCESS,\n      data: data\n    };\n  }\n\n  function locationsFailure(error) {\n    return {\n      type: dataConstants.UPDATE_LOCATIONS_FAILURE,\n      error: error\n    };\n  }\n\n  function pickedUpRequest(data) {\n    return {\n      type: dataConstants.UPDATE_PICKEDUP_REQUEST,\n      data: data\n    };\n  }\n\n  function pickedUpSuccess(data) {\n    return {\n      type: dataConstants.UPDATE_PICKEDUP_SUCCESS,\n      data: data\n    };\n  }\n\n  function pickedUpFailure(error) {\n    return {\n      type: dataConstants.UPDATE_PICKEDUP_FAILURE,\n      error: error\n    };\n  }\n}\n\n;","map":{"version":3,"sources":["/mnt/c/Users/jbuxofplenty/Github/fudlocker/restaurant_web_app/src/actions/data.actions.js"],"names":["userConstants","dataConstants","alertActions","fire","dataActions","populateDashboard","dispatch","locations","database","ref","once","snapshot","tempArray","forEach","childSnapshot","childData","val","key","locationsSuccess","error","locationsFailure","toString","console","log","mealsForSale","mealsSuccess","mealsFailure","pickedUp","org","pickedUpSuccess","pickedUpFailure","mealsRequest","data","type","UPDATE_MEALS_REQUEST","UPDATE_MEALS_SUCCESS","UPDATE_MEALS_FAILURE","locationsRequest","UPDATE_LOCATIONS_REQUEST","UPDATE_LOCATIONS_SUCCESS","UPDATE_LOCATIONS_FAILURE","pickedUpRequest","UPDATE_PICKEDUP_REQUEST","UPDATE_PICKEDUP_SUCCESS","UPDATE_PICKEDUP_FAILURE"],"mappings":"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","sourcesContent":["import { userConstants, dataConstants } from '../constants';\r\nimport { alertActions } from './';\r\nimport fire from \"../firebase\";\n\nexport const dataActions = {\r\n  populateDashboard,\r\n};\n\nfunction populateDashboard() {\n  return dispatch => {\n    var locations;\r\n    fire.database().ref('/lockers/data').once('value', function (snapshot) {\r\n      let tempArray = {};\r\n      snapshot.forEach(function (childSnapshot) {\r\n        var childData = childSnapshot.val();\r\n        tempArray[childSnapshot.key] = childData;\r\n      });\r\n      locations = tempArray;\r\n      dispatch(locationsSuccess(tempArray));\r\n    }, function (error) {\r\n      if (error) {\r\n        dispatch(locationsFailure(error.toString()));\r\n        dispatch(alertActions.error(error.toString()));\r\n      }\r\n    });\r\n    console.log(locations);\r\n\r\n    var mealsForSale;\r\n    fire.database().ref('/meals/forSale').once('value', function (snapshot) {\r\n      let tempArray = {};\r\n      snapshot.forEach(function (childSnapshot) {\r\n        var childData = childSnapshot.val();\r\n        tempArray[childSnapshot.key] = childData;\r\n      });\r\n      mealsForSale = tempArray;\n      dispatch(mealsSuccess(tempArray));\r\n    }, function (error) {\r\n      if (error) {\r\n        dispatch(mealsFailure(error.toString()));\r\n        dispatch(alertActions.error(error.toString()));\r\n      } \r\n    });\r\n    console.log(mealsForSale);\r\n\r\n    var pickedUp;\r\n    fire.database().ref('/restaurants/' + org + '/inventory/pickedUp').once('value', function (snapshot) {\r\n      let tempArray = {};\r\n      snapshot.forEach(function (childSnapshot) {\r\n        var childData = childSnapshot.val();\r\n        tempArray[childSnapshot.key] = childData;\r\n      });\r\n      pickedUp = tempArray;\r\n      dispatch(pickedUpSuccess(tempArray));\r\n    }, function (error) {\r\n      if (error) {\r\n        dispatch(pickedUpFailure(error.toString()));\r\n        dispatch(alertActions.error(error.toString()));\r\n      }\r\n    });\r\n    console.log(pickedUp);\r\n  };\r\n\r\n  function mealsRequest(data) { return { type: dataConstants.UPDATE_MEALS_REQUEST, data } }\r\n  function mealsSuccess(data) { return { type: dataConstants.UPDATE_MEALS_SUCCESS, data } }\r\n  function mealsFailure(error) { return { type: dataConstants.UPDATE_MEALS_FAILURE, error } }\r\n  function locationsRequest(data) { return { type: dataConstants.UPDATE_LOCATIONS_REQUEST, data } }\r\n  function locationsSuccess(data) { return { type: dataConstants.UPDATE_LOCATIONS_SUCCESS, data } }\r\n  function locationsFailure(error) { return { type: dataConstants.UPDATE_LOCATIONS_FAILURE, error } }\n  function pickedUpRequest(data) { return { type: dataConstants.UPDATE_PICKEDUP_REQUEST, data } }\r\n  function pickedUpSuccess(data) { return { type: dataConstants.UPDATE_PICKEDUP_SUCCESS, data } }\r\n  function pickedUpFailure(error) { return { type: dataConstants.UPDATE_PICKEDUP_FAILURE, error } }\r\n  };\n"]},"metadata":{},"sourceType":"module"}